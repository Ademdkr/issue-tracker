<form [formGroup]="filterForm" class="filters-form">
  <div class="filters-group">
    <!-- Status Filter -->
    <mat-form-field appearance="outline">
      <mat-label>Status</mat-label>
      <mat-select formControlName="status" placeholder="Alle Status">
        <mat-option *ngFor="let option of statusOptions" [value]="option.value">
          {{ option.label }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <!-- Priority Filter -->
    <mat-form-field appearance="outline">
      <mat-label>Priorit채t</mat-label>
      <mat-select formControlName="priority" placeholder="Alle Priorit채ten">
        <mat-option
          *ngFor="let option of priorityOptions"
          [value]="option.value"
        >
          {{ option.label}}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <!-- Assignee Filter -->
    <mat-form-field appearance="outline">
      <mat-label>Assignees</mat-label>
      <mat-select formControlName="assigneeId" placeholder="Alle Assignees">
        <mat-option
          *ngFor="let option of assigneeOptions"
          [value]="option.value"
        >
          {{ option.label }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <!-- Label Filter (Multi-Select) -->
    <mat-form-field appearance="outline" floatLabel="always">
      <mat-label>Labels</mat-label>
      <mat-select
        formControlName="labelIds"
        multiple
        placeholder="Alle Labels"
        [hideSingleSelectionIndicator]="true"
      >
        <mat-select-trigger>
          {{ (filterForm.get('labelIds')?.value || []).length === 0 ? 'Alle
          Labels' : (filterForm.get('labelIds')?.value || []).length + '
          ausgew채hlt' }}
        </mat-select-trigger>
        <mat-option *ngFor="let label of groupedLabels" [value]="label.name">
          <div class="label-filter-option">
            <span
              class="label-color-dot"
              [style.background-color]="label.color"
            ></span>
            <span class="label-text">
              {{ label.name }} @if (!projectId && label.projectSlugs &&
              label.projectSlugs.length > 1) {
              <span class="label-project"
                >({{ label.projectSlugs.length }} Projekte)</span
              >
              } @else if (!projectId && label.projectSlugs &&
              label.projectSlugs.length === 1) {
              <span class="label-project">({{ label.projectSlugs[0] }})</span>
              }
            </span>
          </div>
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <!-- Reset Button unter Filtern -->
  <button
    mat-button
    type="button"
    (click)="resetFilters()"
    class="reset-button"
  >
    Filter zur체cksetzen
  </button>
</form>
