<div class="tickets-grid">
  @for (ticket of tickets; track ticket.id) {
  <mat-card class="ticket-card" (click)="onCardClick(ticket)">
    <!-- Card Header -->
    <mat-card-header>
      <mat-card-title>
        <div class="card-title-row">
          <span class="ticket-title-text">{{ ticket.title }}</span>
          <mat-chip [class]="'status-' + ticket.status.toLowerCase()">
            {{ ticket.status }}
          </mat-chip>
        </div>
      </mat-card-title>
    </mat-card-header>

    <!-- Card Content -->
    <mat-card-content>
      <!-- Project (optional) -->
      @if (showProjectColumn && ticket.project) {
      <div class="card-field">
        <mat-icon class="field-icon">folder</mat-icon>
        <div class="project-info">
          <strong>{{ ticket.project.name }}</strong>
          <span class="project-slug">({{ ticket.project.slug }})</span>
        </div>
      </div>
      }

      <!-- Priority -->
      <div class="card-field">
        <mat-icon class="field-icon">flag</mat-icon>
        <mat-chip [class]="'priority-' + ticket.priority.toLowerCase()">
          {{ ticket.priority }}
        </mat-chip>
      </div>

      <!-- Assignee -->
      <div class="card-field">
        <mat-icon class="field-icon">person</mat-icon>
        <span>{{ ticket.assignee?.name || 'Nicht zugewiesen' }}</span>
      </div>

      <!-- Timestamps -->
      <div class="card-timestamps">
        <div class="timestamp">
          <mat-icon>schedule</mat-icon>
          <span class="timestamp-label">Erstellt:</span>
          <span>{{ ticket.createdAt | date:'dd.MM.yyyy HH:mm' }}</span>
        </div>
        @if (ticket.updatedAt) {
        <div class="timestamp">
          <mat-icon>update</mat-icon>
          <span class="timestamp-label">Aktualisiert:</span>
          <span>{{ ticket.updatedAt | date:'dd.MM.yyyy HH:mm' }}</span>
        </div>
        }
      </div>
    </mat-card-content>
  </mat-card>
  } @if (tickets.length === 0) {
  <div class="empty-state">
    <mat-icon>inbox</mat-icon>
    <h3>Keine Tickets vorhanden</h3>
    <p>Es wurden keine Tickets f√ºr dieses Projekt gefunden.</p>
  </div>
  }
</div>
